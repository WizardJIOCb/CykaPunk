# CykaPunk Deployment Documentation

## Server Information
- **Domain**: game.cyka.lol
- **Server IP**: 82.146.42.213
- **Project Path**: /var/www/game.cyka.lol
- **Repository**: https://github.com/WizardJIOCb/CykaPunk

## Prerequisites
- Ubuntu/Debian server
- Nginx installed
- Node.js and npm installed
- Git installed
- Certbot for SSL certificates (optional but recommended)

## Installation Steps

### 1. Server Setup
```bash
# Update system
sudo apt update && sudo apt upgrade -y

# Install required packages
sudo apt install nginx git nodejs npm certbot python3-certbot-nginx -y
```

### 2. Create Project Directory
```bash
sudo mkdir -p /var/www/game.cyka.lol
sudo chown -R $USER:$USER /var/www/game.cyka.lol
```

### 3. Clone Repository
```bash
cd /var/www/game.cyka.lol
git clone https://github.com/WizardJIOCb/CykaPunk .
```

### 4. Install Dependencies and Build
```bash
cd frontend
npm install
npm run build
```

### 5. Configure Nginx

#### Copy configuration files:
```bash
sudo cp documentation/nginx-game.cyka.lol.conf /etc/nginx/sites-available/game.cyka.lol
sudo ln -s /etc/nginx/sites-available/game.cyka.lol /etc/nginx/sites-enabled/
```

#### Test configuration:
```bash
sudo nginx -t
```

#### Reload Nginx:
```bash
sudo systemctl reload nginx
```

### 6. SSL Certificate (Optional but Recommended)
```bash
sudo certbot --nginx -d game.cyka.lol
```

This will automatically:
- Obtain SSL certificate from Let's Encrypt
- Update Nginx configuration for HTTPS
- Set up automatic renewal

### 7. Firewall Configuration
```bash
sudo ufw allow 'Nginx Full'
sudo ufw allow ssh
sudo ufw enable
```

## Directory Structure
```
/var/www/game.cyka.lol/
├── dist/                 # Built frontend files (generated by npm run build)
├── documentation/        # Configuration files and documentation
│   ├── nginx-game.cyka.lol.conf      # HTTP configuration
│   └── nginx-game.cyka.lol-ssl.conf  # HTTPS configuration
├── frontend/            # Source code
└── backend/             # Backend code (if applicable)
```

## Deployment Script
Create a deployment script for easy updates:

```bash
#!/bin/bash
# deploy.sh

cd /var/www/game.cyka.lol

# Pull latest changes
git pull origin main

# Build frontend
cd frontend
npm install
npm run build

# Reload nginx
sudo systemctl reload nginx

echo "Deployment completed successfully!"
```

Make it executable:
```bash
chmod +x deploy.sh
```

## Monitoring and Maintenance

### Check Nginx status:
```bash
sudo systemctl status nginx
```

### View logs:
```bash
# Access logs
tail -f /var/log/nginx/game.cyka.lol.access.log

# Error logs
tail -f /var/log/nginx/game.cyka.lol.error.log
```

### Restart services:
```bash
sudo systemctl restart nginx
```

## Troubleshooting

### Common Issues:

1. **Permission denied errors**:
   ```bash
   sudo chown -R www-data:www-data /var/www/game.cyka.lol/dist
   ```

2. **Nginx configuration test**:
   ```bash
   sudo nginx -t
   ```

3. **Check if service is running**:
   ```bash
   sudo systemctl status nginx
   ```

4. **View detailed error logs**:
   ```bash
   sudo journalctl -u nginx -f
   ```

## Security Recommendations

1. **Regular Updates**: Keep system and packages updated
2. **Firewall**: Ensure UFW is configured properly
3. **SSL**: Always use HTTPS in production
4. **Backup**: Regular backups of the project directory
5. **Monitoring**: Set up monitoring for uptime and performance

## Automated Deployment with GitHub Actions (Optional)

You can set up CI/CD pipeline to automatically deploy on pushes to main branch.